<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="admin">

	<!-- 관리자 로그인 -->
	<select id="a_login" resultType="String">
		select a_name
		from admin
		where
		a_id = #{a_id} and a_passwd = #{a_passwd}
	</select>

	<!-- 회원 목록 -->
	<select id="ag_list"
		resultType="com.example.syFinal.admin.model.dto.AGuestDTO">
		select
		g_idx,
		g_email,
		g_name,
		g_photo,
		g_phone,
		g_url,
		g_profile,
		g_level,
		g_card,
		g_date,
		g_cvc,
		g_point
		from guest
		where
		${searchkey} like CONCAT('%',#{search},'%')
	</select>


	<select id="list_all"
		resultType="com.example.syFinal.admin.model.dto.AGuestDTO">
		select g_idx,g_email
		g_name, g_phone,
		g_url, g_level,
		g_point,
		g_join_date
		from guest
		where g_name like '%'|| #{search} ||'%'
		or g_idx like #{search}
		order by g_idx desc
	</select>


	<!-- 회원 상세 -->
	<select id="ag_detail"
		resultType="com.example.syFinal.admin.model.dto.AGuestDTO">
		select
		g_idx,g_email,g_passwd
		g_name, g_phone,
		g_url, g_level,
		g_point,
		g_card,g_profile,g_join_date
		from guest g, levle l
		where
		g.g_level =
		l.l_level
		g_idx = #{g_idx} and
		order by g_idx
	</select>

	<!-- 회원 수정 -->
	<update id="ag_update">
		update guest
		set
		g_idx=#{g_idx},g_email=#{g_email},g_passwd=#{g_passwd},
		g_phone=#{g_phone},g_url=#{g_url},g_level=#{g_level},g_point=#{g_point},
		g_card=#{g_card},g_profile=#{g_profile},g_join_date=#{g_join_date}
		where g_idx=#{g_idx}
	</update>

	<!-- 회원 삭제 -->
	<delete id="ag_delete">
		delete
		from guest
		where g_idx = #{g_idx}
	</delete>


	<!-- 사업자 목록 -->
	<select id="ah_list"
		resultType="com.example.syFinal.admin.model.dto.AHostDTO">
		select h_idx, h_email, h_name, h_phone, h_level, h_status,
		h_regdate, h_profile
		from host
		where ${searchkey} like CONCAT('%',#{search},'%')
	</select>


	<select id="ah_list_all"
		resultType="com.example.syFinal.admin.model.dto.AHostDTO">
		select h_idx,h_email
		h_name, h_phone,
		h_level, h_status,
		h_regdate,
		h_profile
		from host
		where h_name '%'|| #{search} ||'%' or
		h_idx like #{search}
		order by h_idx desc
	</select>

	<!-- 사업자 삭제 -->
	<delete id="ah_delete">
		delete
		from host
		WHERE h_id = #{h_id}
	</delete>

</mapper>